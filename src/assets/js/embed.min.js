var ApplicationEmbedWidget=ApplicationEmbedWidget||function(t,e){var i={},a=null,o=null,n=!1,l=!0,r=function(t){var e;if("string"==typeof t.data)try{e=JSON.parse(t.data)}catch(t){item={},item.type="",e=item}else e=t.data;switch(e.type){case"getHeight":for(var n in i)i[n].id==e.data.iframe&&1==(r=parseInt(i[n].getAttribute("data-fixed-height")))&&(i[n].parentElement.parentElement.style.height=e.data.height+"px",i[n].style.height=e.data.height+"px",i[n].style.minHeight=e.data.height+"px");null==a&&g(e.source),null==o&&(backlink=!1,(o=document.createElement("a")).href=e.data.refererlink,o.text=e.data.referer,o.target="_blank",o.style.display="none",document.body.appendChild(o));break;case"showPopUp":e.data.parentWidth=window.innerWidth,d(e.data,e.source);break;case"popupPost":s(e.data);break;case"closePopUp":c();break;case"loadComplete":l=e.loadstatus;break;case"scroll":for(var n in i){var r=parseInt(i[n].getAttribute("data-fixed-height")),m=parseInt(i[n].getAttribute("data-wall"));if(1==r){var h=document.documentElement.scrollTop;23725==m&&(h=document.getElementsByClassName("taggbox-container")[0].closest(".content").scrollTop),"top"==e.data.type?h-=120:h+=120,23725==m?document.getElementsByClassName("taggbox-container")[0].closest(".content").scrollTop=h:document.documentElement.scrollTop=h}}}},s=function(t){var e=document.getElementById("_taggbox_modal_frame");e&&a&&n&&e.contentWindow.postMessage(t,e.src)},d=function(t,e){var i=document.getElementById("_taggbox_modal_frame");if(i&&a){if(!n)return void d(t,e);i.style.display="block",i.contentWindow.postMessage(t,i.src)}else(a=document.createElement("iframe")).src="https://widget.taggbox.com/widget-modal/index.html",a.id="_taggbox_modal_frame",a.scrolling="no",a.frameborder=0,a.allowtransparency="true",a.style.display="block",a.style.position="fixed",a.style.left="0px",a.style.right="0px",a.style.top="0px",a.style.bottom="0px",a.style.width="100%",a.style.height="100%",a.style.border="none",a.style.zIndex="99999999",a.title="Taggbox widget",document.body.appendChild(a),a.onload=function(){n=!0,a.contentWindow.postMessage(t,a.src)}},g=function(t){document.getElementById("_taggbox_modal_frame")||((a=document.createElement("iframe")).src="https://widget.taggbox.com/widget-modal/index.html",a.id="_taggbox_modal_frame",a.scrolling="no",a.frameborder=0,a.allowtransparency="true",a.style.display="none",a.style.position="fixed",a.style.left="0px",a.style.right="0px",a.style.top="0px",a.style.bottom="0px",a.style.width="100%",a.style.height="100%",a.style.border="none",a.style.zIndex="99999999",a.title="Taggbox widget",document.body.appendChild(a),a.onload=function(){n=!0})},c=function(){document.getElementById("_taggbox_modal_frame").style.display="none"};return{init:function(){var t=0;for(var e in i)i.hasOwnProperty(e)&&++t;0==t&&window.addEventListener("message",r,!1);for(var a=document.getElementsByClassName("taggbox-container"),o=document.getElementsByClassName("taggbox-socialwall"),n=0;n<a.length;n++){a[n].clientWidth>=window.innerWidth&&(a[n].style.width="100%"),a[n].style.lineHeight="initial",39221!=o[n].getAttribute("data-wall-id")&&(a[n].style.overflow="hidden");var s=document.createElement("style");a[n].appendChild(s)}for(n=0;n<o.length;n++)if(0==o[n].getElementsByTagName("iframe").length){var d=1,g=150,c=o[n].parentElement.style.height;(c=parseInt(c.replace(/[^\d.-]/g,"")))>100&&(d=0,g=c);var m=o[n].getAttribute("data-wall-id"),h=Math.random().toString(36).substring(7),p='<iframe src="https://widget.taggbox.com/widget/index.html?wall_id='+m+'" data-fixed-height="'+d+'" data-height="'+g+'" data-wall="'+m+'" data-position="'+n+'" id="iframe'+h+'" style="visibility: hidden;position: absolute;margin:0;left: -999em;display: inline-block;border: none;width:100%;height:100%;" scrolling="no" frameborder="0" allowtransparency="true" title="Taggbox widget"></iframe>';o[n].innerHTML=p,o[n].style.webkitOverflowScrolling="touch";try{o[n].parentElement.style.webkitOverflowScrolling="touch"}catch(t){console.log("a")}p=o[n].firstChild,i[n]=p,document.getElementById("iframe"+h).addEventListener("load",function(){var t=this.getAttribute("data-position"),e=this.getAttribute("id"),i=this.getAttribute("data-fixed-height"),n=this.getAttribute("data-height");this.style.visibility="visible",this.style.position="static";var r=a[t].offsetHeight;this.style.minHeight=r+"px";var s={type:"startEmbed",url:window.location.href,id:e,fixedHeight:i,iframeHeight:n,theme:o[t].getAttribute("data-wall-theme"),tags:o[t].getAttribute("data-tags")};this.contentWindow.postMessage(s,this.src);for(var d=document.querySelectorAll("p:empty"),g=d.length-1;g>-1;g--)d[g].parentNode.removeChild(d[g]);setTimeout(function(){var e=o[t].offsetHeight;a[t].clientHeight+4<e?a[t].onscroll=function(){a[t].scrollTop+a[t].offsetHeight>=parseInt(e)-parseInt(300)&&l&&(l=!1,o[t].firstChild.contentWindow.postMessage({type:"loadMore"},o[t].firstChild.src))}:window.onscroll=function(){var t=document.body,e=document.documentElement,i=Math.max(t.scrollHeight,t.offsetHeight,e.clientHeight,e.scrollHeight,e.offsetHeight);if(window.innerHeight+window.pageYOffset>=parseInt(i)-parseInt(50)&&l){l=!1;for(var a={type:"loadMore"},n=0;n<o.length;n++)o[n].firstChild.contentWindow.postMessage(a,o[n].firstChild.src)}}},5000)})}}}}(window);ApplicationEmbedWidget.init();